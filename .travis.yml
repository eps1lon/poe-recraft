language: node_js
before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.12.3
  - export PATH=$HOME/.yarn/bin:$PATH
cache:
  yarn: true
script:
  # workspace root
  - yarn yarn-deduplicate
  - git diff --exit-code
  - yarn format check-changed
  - yarn bootstrap
  - yarn lint
  - yarn test:ci
  - yarn coveralls
  # i18n
  - yarn workspace poe-i18n test:typings
  - yarn workspace poe-i18n build
  # mods
  - yarn workspace poe-mods test:typings
  - yarn workspace poe-mods build
  # poe-components-item
  # - yarn workspace poe-components-item test:ci
  - yarn workspace poe-components-item build
  # recraft
  - yarn workspace website build
